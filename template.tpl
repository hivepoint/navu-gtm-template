___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Navu Embed Code",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "This handles the addition of the Navu embed code to your website.  You must have a Navu account and a site created.",
  "containerContexts": [
    "WEB"
  ],
  "categories": ["LEAD_GENERATION", "REMARKETING", "PERSONALIZATION", "CONVERSIONS"],
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "siteCode",
    "displayName": "Site code, from the \"code\" field on the Site tab in your app.navu.co dashboard",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');

const setInWindow = require('setInWindow');
setInWindow('$navu', {siteCode: data.siteCode}, false);

const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const url = 'https://embed.navu.co/boot.js';
if (queryPermission('inject_script', url)) {
  injectScript(url);
  log('Navu: embed code installed');
} else {
  log('Navu: injectScript permission denied');
}

// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "$navu"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://embed.navu.co/boot.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 6/15/2023, 10:26:44 AM


